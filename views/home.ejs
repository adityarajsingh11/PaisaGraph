<%- include('layout/mainLayout', {
  title: 'Dashboard - Expense Manager',
  body: `
    <!-- Main Dashboard Container -->
    <div class="max-w-7xl mx-auto space-y-8 animate-fade-in">
      
      <!-- Header Section -->
      <div class="animate-slide-down">
        ${include('partials/header', { user })}
      </div>

      <!-- Summary Cards Section -->
      <div class="animate-slide-up" style="animation-delay: 0.1s;">
        ${include('partials/summary')}
      </div>

      <!-- Filters & Analytics Section -->
      <div class="animate-slide-up" style="animation-delay: 0.2s;">
        ${include('partials/filters')}
      </div>

      <!-- Main Content Grid -->
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 animate-slide-up" style="animation-delay: 0.3s;">
        <!-- Add Transaction Form -->
        <div class="lg:col-span-1">
          ${include('partials/addTransaction')}
        </div>
        
        <!-- Transaction List -->
        <div class="lg:col-span-2">
          ${include('partials/transactionList')}
        </div>
      </section>

      <!-- Scripts -->
      ${include('partials/scripts')}
    </div>

    <!-- Custom Animations & Styles -->
    <style>
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes slideDown {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      @keyframes slideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .animate-fade-in {
        animation: fadeIn 0.6s ease-out;
      }

      .animate-slide-down {
        animation: slideDown 0.6s ease-out;
      }

      .animate-slide-up {
        animation: slideUp 0.6s ease-out;
        animation-fill-mode: both;
      }

      /* Smooth scroll behavior */
      html {
        scroll-behavior: smooth;
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
      }

      /* Loading state styles */
      .loading-overlay {
        position: fixed;
        inset: 0;
        background: rgba(255, 255, 255, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        backdrop-filter: blur(5px);
        transition: opacity 0.3s ease;
      }

      .loading-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid #e2e8f0;
        border-top-color: #3b82f6;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      /* Print styles */
      @media print {
        body { background: white !important; }
        .no-print { display: none !important; }
        .print-break { page-break-after: always; }
      }

      /* Mobile spacing */
      @media (max-width: 640px) {
        .max-w-7xl {
          padding-left: 1rem;
          padding-right: 1rem;
        }
      }

      /* Accessibility focus */
      *:focus-visible {
        outline: 3px solid #3b82f6;
        outline-offset: 2px;
        border-radius: 4px;
      }

      /* Reduced motion */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    </style>

    <!-- Optional Loading Indicator -->
    <div class="loading-overlay">
      <div class="loading-spinner"></div>
    </div>

    <!-- JS Enhancements -->
    <script>
      // Hide loading overlay when page is fully loaded
      window.addEventListener('load', () => {
        const loader = document.querySelector('.loading-overlay');
        if (loader) {
          loader.style.opacity = '0';
          setTimeout(() => loader.remove(), 300);
        }
      });

      // Smooth scroll for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', e => {
          e.preventDefault();
          const target = document.querySelector(anchor.getAttribute('href'));
          if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });
    </script>
  `
}) %>
